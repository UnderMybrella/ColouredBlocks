package org.abimon.mods.minecraft.dnc;

import java.lang.reflect.Method;

import org.json.simple.JSONObject;
import org.json.simple.JSONValue;

import net.minecraft.entity.EntityLivingBase;
import net.minecraft.util.ChatComponentTranslation;
import net.minecraft.util.DamageSource;
import net.minecraft.util.IChatComponent;
import net.minecraft.util.StatCollector;

public class CustomDamageSource extends DamageSource{

	public String deathMessage = "%1$s was violently murdered by %2$s. Both will now have to pay their respects to Science";
	public String playerMessage = deathMessage;
	
	public CustomDamageSource(String par1Str, String deathMessage, String playerMessage) 
	{
		super(par1Str);
		this.deathMessage = deathMessage;
		this.playerMessage = playerMessage;
	}
	
    public IChatComponent func_151519_b(EntityLivingBase p_151519_1_)
    {
        EntityLivingBase entitylivingbase1 = p_151519_1_.func_94060_bK();
        String s = deathMessage;
        String s1 = playerMessage;
        return entitylivingbase1 != null && StatCollector.canTranslate(s1) ? new ChatComponentTranslation(s1, new Object[] {p_151519_1_.func_145748_c_(), entitylivingbase1.func_145748_c_()}): new ChatComponentTranslation(s, new Object[] {p_151519_1_.func_145748_c_()});
    }
    
    public String toString()
    {
    	return toJSONString();
    }
    
    public String toJSONString()
    {
    	JSONObject obj = new JSONObject();
    	obj.put("damageType", damageType);
    	String s = "{damageType=" + damageType + ", deathMessage=" + deathMessage + ", playerMessage=" + playerMessage + ", isProjectile=" + isProjectile() + ", isExplosion=" + isExplosion() + ", isUnblockable=" + isUnblockable() + ", canHarmInCreative=" + canHarmInCreative() + ", isDamageAbsolute=" + isDamageAbsolute() + ", isFireDamage=" + isFireDamage() + ", isDifficultyScaled=" + isDifficultyScaled() + ", isMagicDamage=" + isMagicDamage() + "}";
    	return s;
    }
    
    public static CustomDamageSource createFromJSONString(String json)
    {
    	CustomDamageSource damage = new CustomDamageSource("name", "die", "die");
    	JSONObject obj = (JSONObject) JSONValue.parse(json);
    	damage.damageType = (String) obj.get("damageType");
    	damage.deathMessage = (String) obj.get("deathMessage");
    	damage.playerMessage = (String) obj.get("playerMessage");
    	if((Boolean) obj.get(""))
    	return damage;
    }
}
