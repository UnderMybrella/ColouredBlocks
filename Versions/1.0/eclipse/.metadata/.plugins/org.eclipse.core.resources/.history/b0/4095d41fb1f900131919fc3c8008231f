package org.abimon.mods.minecraft.colouredBlocks;

import java.util.HashMap;

import net.minecraft.block.Block;
import net.minecraft.creativetab.CreativeTabs;
import net.minecraft.init.Blocks;
import net.minecraft.init.Items;
import net.minecraft.item.Item;
import net.minecraft.item.ItemBlockWithMetadata;
import net.minecraft.item.ItemStack;
import net.minecraft.item.crafting.CraftingManager;
import net.minecraftforge.client.MinecraftForgeClient;
import cpw.mods.fml.common.Mod;
import cpw.mods.fml.common.Mod.EventHandler;
import cpw.mods.fml.common.event.FMLInitializationEvent;
import cpw.mods.fml.common.registry.GameRegistry;
import cpw.mods.fml.relauncher.Side;
import cpw.mods.fml.relauncher.SideOnly;

@Mod(modid = ColouredBlocks.MODID, version = ColouredBlocks.VERSION)
public class ColouredBlocks
{
    public static final String MODID = "colouredblocks";
    public static final String VERSION = "1.0";
    
    public static final CreativeTabs tabColoured  = new CreativeTabs(CreativeTabs.getNextID(), MODID + ":creativeTab")
    {
        @SideOnly(Side.CLIENT)
        public Item getTabIconItem()
        {
            return ColouredBlocks.crayon;
        }
    };
    
    public static Item crayon = new ItemCrayon().setCreativeTab(tabColoured).setUnlocalizedName(MODID + ":crayon");
    public static Block colouredBlock = new BlockColoured();
    public static Block dyeBlock = new BlockDye();
    public static Item colouredPlacer = new ItemColouredPlacer().setCreativeTab(tabColoured);
    public static Item colouringEssense = new ItemColouringEssense().setCreativeTab(tabColoured).setUnlocalizedName(MODID + ":essense");
    
    public static final HashMap<String, Integer[]> itemstackToColourAdditions = new HashMap<String, Integer[]>();
    
    @EventHandler
    public void init(FMLInitializationEvent event)
    {
    	GameRegistry.registerItem(crayon, "crayon");
    	GameRegistry.registerBlock(colouredBlock, "colouredBlock");
    	GameRegistry.registerTileEntity(TileEntityColoured.class, "teColoured");
    	GameRegistry.registerItem(colouredPlacer, "colouredPlacer");
    	GameRegistry.registerItem(colouringEssense, "essense");
    	GameRegistry.registerBlock(dyeBlock, ItemBlockWithMetadata.class, "dyeBlock", dyeBlock, dyeBlock);
    	MinecraftForgeClient.registerItemRenderer(colouredPlacer, new PlacerRender());
    	registerItemstackWithColouring(new ItemStack(Items.dye, 1, 1), 8, 0, 0);
    	registerItemstackWithColouring(new ItemStack(Items.dye, 1, 2), 0, 8, 0);
    	registerItemstackWithColouring(new ItemStack(Items.dye, 1, 4), 0, 0, 8);
    	registerItemstackWithColouring(new ItemStack(Items.dye, 1, 14), 1, 0, 0);
    	registerItemstackWithColouring(new ItemStack(Items.dye, 1, 10), 0, 1, 0);
    	registerItemstackWithColouring(new ItemStack(Items.dye, 1, 6), 0, 0, 1);
    	registerItemstackWithColouring(new ItemStack(Items.dye, 1, 0), 0, 0, 0);
    	CraftingManager.getInstance().getRecipeList().add(new ColouredRecipes());
    	for(int i = 0; i < 16; i++)
    		CraftingManager.getInstance().addRecipe(new ItemStack(dyeBlock, 1, i), new Object[]{"DDD", "DQD", "DDD", 'D', new ItemStack(Items.dye, 1, i), 'Q', Blocks.quartz_block});
    }
    
    public static void registerItemstackWithColouring(ItemStack item, int redAddition, int greenAddition, int blueAddition)
    {
    	if(item.getItem() instanceof IColourable)
    		return;
    	itemstackToColourAdditions.put(represent(item), new Integer[]{redAddition, greenAddition, blueAddition});
    }
    
    public static String represent(ItemStack item)
    {
    	String s = "Name:" + item.getDisplayName() + ", Damage:" + item.getItemDamage() + ", NBT:" + item.getTagCompound();
    	return s;
    }
}
