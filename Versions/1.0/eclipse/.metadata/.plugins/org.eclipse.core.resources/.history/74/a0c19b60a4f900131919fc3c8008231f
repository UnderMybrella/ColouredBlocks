package org.abimon.mods.minecraft.colouredBlocks;

import java.util.HashMap;

import net.minecraft.block.Block;
import net.minecraft.creativetab.CreativeTabs;
import net.minecraft.init.Blocks;
import net.minecraft.init.Items;
import net.minecraft.item.Item;
import net.minecraft.item.ItemStack;
import net.minecraft.item.crafting.CraftingManager;
import net.minecraftforge.client.MinecraftForgeClient;
import cpw.mods.fml.common.Mod;
import cpw.mods.fml.common.Mod.EventHandler;
import cpw.mods.fml.common.event.FMLInitializationEvent;
import cpw.mods.fml.common.registry.GameRegistry;
import cpw.mods.fml.relauncher.Side;
import cpw.mods.fml.relauncher.SideOnly;

@Mod(modid = ColouredBlocks.MODID, version = ColouredBlocks.VERSION)
public class ColouredBlocks
{
    public static final String MODID = "colouredblocks";
    public static final String VERSION = "1.0";
    
    public static final CreativeTabs tabColoured  = new CreativeTabs(CreativeTabs.getNextID(), MODID + ":creativeTab")
    {
        @SideOnly(Side.CLIENT)
        public Item getTabIconItem()
        {
            return ColouredBlocks.crayon;
        }
    };
    
    public static Item crayon = new ItemCrayon().setCreativeTab(tabColoured).setUnlocalizedName(MODID + ":crayon");
    public static Block colouredBlock = new BlockColoured();
    public static Item colouredPlacer = new ItemColouredPlacer().setCreativeTab(tabColoured);
    public static Item colouringEssense = new ItemColouringEssense().setCreativeTab(tabColoured).setUnlocalizedName(MODID + ":essense");
    
    public static final HashMap<ItemStack, Integer[]> itemstackToColourAdditions = new HashMap<ItemStack, Integer[]>();
    
    @EventHandler
    public void init(FMLInitializationEvent event)
    {
    	GameRegistry.registerItem(crayon, "crayon");
    	GameRegistry.registerBlock(colouredBlock, "colouredBlock");
    	GameRegistry.registerTileEntity(TileEntityColoured.class, "teColoured");
    	GameRegistry.registerItem(colouredPlacer, "colouredPlacer");
    	GameRegistry.registerItem(colouringEssense, "essense");
    	MinecraftForgeClient.registerItemRenderer(colouredPlacer, new PlacerRender());
    	registerItemstackWithColouring(new ItemStack(Items.dye, 1, 1), 8, 0, 0);
    	CraftingManager.getInstance().getRecipeList().add(new ColouredRecipes());
    }
    
    public static void registerItemstackWithColouring(ItemStack item, int redAddition, int greenAddition, int blueAddition)
    {
    	if(item.getItem() instanceof IColourable)
    		return;
    	itemstackToColourAdditions.put(new ItemStack(item.getItem(), 1, item.getItemDamage()), new Integer[]{redAddition, greenAddition, blueAddition});
    }
    
    public static String represent(ItemStack item)
    {
    	String s = "Name:" + item.getDisplayName() + ", Damage:" + item.getItemDamage() + ", NBT:" + item.getTagCompound();
    	return s;
    }
}
